
ifeq ($(CONFIG_MIPS_BRCM),y)

# Linux

obj-y		+= flash_api.o flash_common.o

ifeq ($(strip $(BRCM_CHIP)),6368)
INC_CFI_FLASH_DRIVER=1
INC_SPI_FLASH_DRIVER=1
INC_VRT_FLASH_DRIVER=0
endif
ifeq ($(strip $(BRCM_CHIP)),6816)
INC_CFI_FLASH_DRIVER=1
INC_SPI_FLASH_DRIVER=1
INC_VRT_FLASH_DRIVER=0
endif
ifeq ($(strip $(BRCM_CHIP)),6362)
INC_CFI_FLASH_DRIVER=0
INC_SPI_FLASH_DRIVER=1
INC_VRT_FLASH_DRIVER=0
endif
ifeq ($(strip $(BRCM_CHIP)),6328)
INC_CFI_FLASH_DRIVER=0
INC_SPI_FLASH_DRIVER=1
INC_VRT_FLASH_DRIVER=0
endif
ifeq ($(strip $(BRCM_CHIP)),3380)
INC_CFI_FLASH_DRIVER=0
INC_SPI_FLASH_DRIVER=0
INC_VRT_FLASH_DRIVER=1
endif
ifeq ($(strip $(BRCM_CHIP)),kilauea)
INC_CFI_FLASH_DRIVER=0
INC_SPI_FLASH_DRIVER=1
INC_VRT_FLASH_DRIVER=0
endif
ifeq ($(strip $(BRCM_CHIP)),3383)
INC_CFI_FLASH_DRIVER=0
INC_SPI_FLASH_DRIVER=0
INC_VRT_FLASH_DRIVER=1
endif

ifeq ($(strip $(INC_CFI_FLASH_DRIVER)),1)
obj-y		+= cfiflash.o
endif
ifeq ($(strip $(INC_SPI_FLASH_DRIVER)),1)
obj-y		+= spiflash.o
endif
ifeq ($(strip $(INC_VRT_FLASH_DRIVER)),1)
obj-y		+= vflash.o
endif

EXTRA_CFLAGS += -DCONFIG_BCM9$(BRCM_CHIP)
EXTRA_CFLAGS += -I$(INC_BRCMDRIVER_PUB_PATH)/$(BRCM_BOARD)
EXTRA_CFLAGS += -I$(INC_BRCMSHARED_PUB_PATH)/$(BRCM_BOARD)
# EXTRA_CFLAGS += -DINC_CFI_FLASH_DRIVER=$(INC_CFI_FLASH_DRIVER)
# EXTRA_CFLAGS += -DINC_SPI_FLASH_DRIVER=$(INC_SPI_FLASH_DRIVER)
# EXTRA_CFLAGS += -DINC_VRT_FLASH_DRIVER=$(INC_VRT_FLASH_DRIVER)
EXTRA_CFLAGS += -I$(INC_BRCMSHARED_PRIV_PATH)/$(BRCM_BOARD)/ioproc/iop_common/include
EXTRA_CFLAGS += -I$(BRCMDRIVERS_DIR)/broadcom/net/iop/impl2
EXTRA_CFLAGS += -I$(INC_BRCMSHARED_PRIV_PATH)/$(BRCM_BOARD)/ioproc/utp

endif







